# Проект создал на базе Yii2.

#### Первая часть (sql запросы)
Находятся в папке `/part_1`. В каждом файле своя часть.

#### Вторая часть (подсчет максимального количества активных пользователей)
Основная логика подсчета находится в методе `\frontend\models\VisitsForm::getMaxOnlineUsers`
Там 2 запроса. Первый считает количество пользователей онлайн на начало периода. Это очень тяжелый запрос, и чем дольше живет сайт, тем запрос тяжелее.
Второй запрос просто тяжелый. Он берет все записи за текущий период (максимум день).

Чтобы облегчить первый запрос и вообще сделать получение пользователей он-лайн возможным, нужно по крону, например, раз в час вычислять количество пользователей онлайн и сохранять в отдельной табличке. После этого первый запрос станет вполне рабочим (стоимость 100 тыс у.е.)

То есть общая рекомендация использовать метод, который я написал, но использовать его раз в час, или раз в 10 минут, чтобы опираться на эти результаты и основной результат (максимальное количество пользователей он-лайн) получать мнговенно.

Ниже список файлов, которые я написал для выполнения тестового задания
* \frontend\models\VisitsForm
* \common\models\Visits
* \frontend\controllers\RunController (для заполнения БД)
* \frontend\controllers\VisitsController
* \frontend/views/visits/index.php